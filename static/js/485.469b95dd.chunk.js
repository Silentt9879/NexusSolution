"use strict";(self.webpackChunknexussolution=self.webpackChunknexussolution||[]).push([[485],{5485:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var r=n(9379),l=n(5043),s=n(1357),i=n(9367),o=n(3986),c=n(579);function a(e){return"span"===e._type&&"text"in e&&"string"==typeof e.text&&(typeof e.marks>"u"||Array.isArray(e.marks)&&e.marks.every(e=>"string"==typeof e))}function d(e){return"string"==typeof e._type&&"@"!==e._type[0]&&(!("markDefs"in e)||!e.markDefs||Array.isArray(e.markDefs)&&e.markDefs.every(e=>"string"==typeof e._key))&&"children"in e&&Array.isArray(e.children)&&e.children.every(e=>"object"==typeof e&&"_type"in e)}function u(e){return d(e)&&"listItem"in e&&"string"==typeof e.listItem&&(typeof e.level>"u"||"number"==typeof e.level)}function m(e){return"@list"===e._type}function h(e){return"@span"===e._type}function x(e){return"@text"===e._type}const p=["strong","em","code","underline","strike-through"];function y(e,t,n){if(!a(e)||!e.marks)return[];if(!e.marks.length)return[];const r=e.marks.slice(),l={};return r.forEach(e=>{l[e]=1;for(let r=t+1;r<n.length;r++){const t=n[r];if(!(t&&a(t)&&Array.isArray(t.marks)&&-1!==t.marks.indexOf(e)))break;l[e]++}}),r.sort((e,t)=>function(e,t,n){const r=e[t],l=e[n];if(r!==l)return l-r;const s=p.indexOf(t),i=p.indexOf(n);return s!==i?s-i:t.localeCompare(n)}(l,e,t))}function f(e,t){return(e.level||1)===t.level&&e.listItem===t.listItem}function k(e,t,n){return{_type:"@list",_key:"".concat(e._key||"".concat(t),"-parent"),mode:n,level:e.level||1,listItem:e.listItem,children:[e]}}function g(e,t){const n=t.level||1,r=t.listItem||"normal",l="string"==typeof t.listItem;if(m(e)&&(e.level||1)===n&&l&&(e.listItem||"normal")===r)return e;if(!("children"in e))return;const s=e.children[e.children.length-1];return s&&!a(s)?g(s,t):void 0}function b(e){let t="";return e.children.forEach(e=>{x(e)?t+=e.text:h(e)&&(t+=b(e))}),t}const j=["block","list","listItem","marks","types"],v=["listItem"],I=["_key"],N={textDecoration:"underline"},w=(e,t)=>"[@portabletext/react] Unknown ".concat(e,", specify a component for it in the `components.").concat(t,"` prop"),_=e=>w('block type "'.concat(e,'"'),"types");function A(e){console.warn(e)}const S={display:"none"},T={types:{},block:{normal:e=>{let{children:t}=e;return(0,c.jsx)("p",{children:t})},blockquote:e=>{let{children:t}=e;return(0,c.jsx)("blockquote",{children:t})},h1:e=>{let{children:t}=e;return(0,c.jsx)("h1",{children:t})},h2:e=>{let{children:t}=e;return(0,c.jsx)("h2",{children:t})},h3:e=>{let{children:t}=e;return(0,c.jsx)("h3",{children:t})},h4:e=>{let{children:t}=e;return(0,c.jsx)("h4",{children:t})},h5:e=>{let{children:t}=e;return(0,c.jsx)("h5",{children:t})},h6:e=>{let{children:t}=e;return(0,c.jsx)("h6",{children:t})}},marks:{em:e=>{let{children:t}=e;return(0,c.jsx)("em",{children:t})},strong:e=>{let{children:t}=e;return(0,c.jsx)("strong",{children:t})},code:e=>{let{children:t}=e;return(0,c.jsx)("code",{children:t})},underline:e=>{let{children:t}=e;return(0,c.jsx)("span",{style:N,children:t})},"strike-through":e=>{let{children:t}=e;return(0,c.jsx)("del",{children:t})},link:e=>{let{children:t,value:n}=e;return(0,c.jsx)("a",{href:null===n||void 0===n?void 0:n.href,children:t})}},list:{number:e=>{let{children:t}=e;return(0,c.jsx)("ol",{children:t})},bullet:e=>{let{children:t}=e;return(0,c.jsx)("ul",{children:t})}},listItem:e=>{let{children:t}=e;return(0,c.jsx)("li",{children:t})},hardBreak:()=>(0,c.jsx)("br",{}),unknownType:e=>{let{value:t,isInline:n}=e;const r=_(t._type);return n?(0,c.jsx)("span",{style:S,children:r}):(0,c.jsx)("div",{style:S,children:r})},unknownMark:e=>{let{markType:t,children:n}=e;return(0,c.jsx)("span",{className:"unknown__pt__mark__".concat(t),children:n})},unknownList:e=>{let{children:t}=e;return(0,c.jsx)("ul",{children:t})},unknownListItem:e=>{let{children:t}=e;return(0,c.jsx)("li",{children:t})},unknownBlockStyle:e=>{let{children:t}=e;return(0,c.jsx)("p",{children:t})}};function C(e,t,n){const l=t[n],s=e[n];return"function"==typeof l||l&&"function"==typeof s?l:l?(0,r.A)((0,r.A)({},s),l):s}function D(e){let{value:t,components:n,listNestingMode:s,onMissingComponent:i=A}=e;const a=i||B,d=function(e,t){const n=[];let l;for(let s=0;s<e.length;s++){const i=e[s];if(i){if(!u(i)){n.push(i),l=void 0;continue}if(!l){l=k(i,s,t),n.push(l);continue}if(f(i,l)){l.children.push(i);continue}if((i.level||1)>l.level){const e=k(i,s,t);if("html"===t){const t=l.children[l.children.length-1],n=(0,r.A)((0,r.A)({},t),{},{children:[...t.children,e]});l.children[l.children.length-1]=n}else l.children.push(e);l=e;continue}if((i.level||1)<l.level){const e=n[n.length-1],r=e&&g(e,i);if(r){l=r,l.children.push(i);continue}l=k(i,s,t),n.push(l);continue}if(i.listItem!==l.listItem){const e=n[n.length-1],r=e&&g(e,{level:i.level||1});if(r&&r.listItem===i.listItem){l=r,l.children.push(i);continue}l=k(i,s,t),n.push(l);continue}console.warn("Unknown state encountered for block",i),n.push(i)}}return n}(Array.isArray(t)?t:[t],s||"html"),m=(0,l.useMemo)(()=>n?function(e,t){const{block:n,list:l,listItem:s,marks:i,types:c}=t,a=(0,o.A)(t,j);return(0,r.A)((0,r.A)({},e),{},{block:C(e,t,"block"),list:C(e,t,"list"),listItem:C(e,t,"listItem"),marks:C(e,t,"marks"),types:C(e,t,"types")},a)}(T,n):T,[n]),h=(0,l.useMemo)(()=>E(m,a),[m,a]),x=d.map((e,t)=>h({node:e,index:t,isInline:!1,renderNode:h}));return(0,c.jsx)(c.Fragment,{children:x})}const E=(e,t)=>{function n(l){const{node:s,index:i,isInline:a}=l,p=s._key||"node-".concat(i);return m(s)?function(l,s,i){const o=l.children.map((e,t)=>n({node:e._key?e:(0,r.A)((0,r.A)({},e),{},{_key:"li-".concat(s,"-").concat(t)}),index:t,isInline:!1})),a=e.list,d=("function"==typeof a?a:a[l.listItem])||e.unknownList;if(d===e.unknownList){const e=l.listItem||"bullet";t(w('list style "'.concat(e,'"'),"list"),{nodeType:"listStyle",type:e})}return(0,c.jsx)(d,{value:l,index:s,isInline:!1,renderNode:n,children:o},i)}(s,i,p):u(s)?function(r,l,s){const i=L({node:r,index:l,isInline:!1,renderNode:n}),a=e.listItem,d=("function"==typeof a?a:a[r.listItem])||e.unknownListItem;if(d===e.unknownListItem){const e=r.listItem||"bullet";t(w('list item style "'.concat(e,'"'),"listItem"),{type:e,nodeType:"listItemStyle"})}let u=i.children;if(r.style&&"normal"!==r.style){const{listItem:e}=r;u=n({node:(0,o.A)(r,v),index:l,isInline:!1})}return(0,c.jsx)(d,{value:r,index:l,isInline:!1,renderNode:n,children:u},s)}(s,i,p):h(s)?function(r,l,s){const{markDef:i,markType:o,markKey:a}=r,d=e.marks[o]||e.unknownMark,u=r.children.map((e,t)=>n({node:e,index:t,isInline:!0}));return d===e.unknownMark&&t((e=>w('mark type "'.concat(e,'"'),"marks"))(o),{nodeType:"mark",type:o}),(0,c.jsx)(d,{text:b(r),value:i,markType:o,markKey:a,renderNode:n,children:u},s)}(s,0,p):function(t){return t._type in e.types}(s)?function(t,l,s,i){const o={value:t,isInline:i,index:l,renderNode:n},a=e.types[t._type];return a?(0,c.jsx)(a,(0,r.A)({},o),s):null}(s,i,p,a):d(s)?function(l,s,i,a){const d=L({node:l,index:s,isInline:a,renderNode:n}),{_key:u}=d,m=(0,o.A)(d,I),h=m.node.style||"normal",x=("function"==typeof e.block?e.block:e.block[h])||e.unknownBlockStyle;return x===e.unknownBlockStyle&&t((p=h,w('block style "'.concat(p,'"'),"block")),{nodeType:"blockStyle",type:h}),(0,c.jsx)(x,(0,r.A)((0,r.A)({},m),{},{value:m.node,renderNode:n}),i);var p}(s,i,p,a):x(s)?function(t,n){if("\n"===t.text){const t=e.hardBreak;return t?(0,c.jsx)(t,{},n):"\n"}return t.text}(s,p):function(l,s,i,o){const a={value:l,isInline:o,index:s,renderNode:n};t(_(l._type),{nodeType:"block",type:l._type});const d=e.unknownType;return(0,c.jsx)(d,(0,r.A)({},a),i)}(s,i,p,a)}return n};function L(e){const{node:t,index:n,isInline:r,renderNode:l}=e,s=function(e){var t;const{children:n}=e,r=null!==(t=e.markDefs)&&void 0!==t?t:[];if(!n||!n.length)return[];const l=n.map(y),s={_type:"@span",children:[],markType:"<unknown>"};let i=[s];for(let c=0;c<n.length;c++){const e=n[c];if(!e)continue;const t=l[c]||[];let s=1;if(i.length>1)for(;s<i.length;s++){var o;const e=(null===(o=i[s])||void 0===o?void 0:o.markKey)||"",n=t.indexOf(e);if(-1===n)break;t.splice(n,1)}i=i.slice(0,s);let d=i[i.length-1];if(d){for(const n of t){const t=null===r||void 0===r?void 0:r.find(e=>e._key===n),l=t?t._type:n,s={_type:"@span",_key:e._key,children:[],markDef:t,markType:l,markKey:n};d.children.push(s),i.push(s),d=s}if(a(e)){const t=e.text.split("\n");for(let e=t.length;e-- >1;)t.splice(e,0,"\n");d.children=d.children.concat(t.map(e=>({_type:"@text",text:e})))}else d.children=d.children.concat(e)}}return s.children}(t).map((e,t)=>l({node:e,isInline:!0,index:t,renderNode:l}));return{_key:t._key||"block-".concat(n),children:s,index:n,isInline:r,node:t}}function B(){}var q=n(5621),M=n(1779);function O(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}const P=function(){const[e,t]=(0,l.useState)(null),[n,o]=(0,l.useState)(null),[a,d]=(0,l.useState)(!0),[u,m]=(0,l.useState)(null),[h,x]=(0,l.useState)({name:"",comment:""}),[p,y]=(0,l.useState)(!1),[f,k]=(0,l.useState)(!1),{slug:g}=(0,s.g)();(0,l.useEffect)(()=>{d(!0),q.S.fetch('*[_type == "post" && slug.current == $slug][0]{\n      _id, // We need the post ID to find its comments\n      title,\n      "slug": slug.current,\n      mainImage,\n      publishedAt,\n      body\n    }',{slug:g}).then(e=>{e?t(e):(m(new Error("Post not found.")),d(!1))}).catch(e=>{console.error("Error fetching post:",e),m(e),d(!1)})},[g]),(0,l.useEffect)(()=>{if(e){const t='*[_type == "comment" && approved == true && post._ref == $postId]{\n        _id,\n        name,\n        comment,\n        _createdAt\n      } | order(_createdAt asc)';q.S.fetch(t,{postId:e._id}).then(e=>{o(e),d(!1)}).catch(e=>{console.error("Error fetching comments:",e),m(e),d(!1)})}},[e]);const b=e=>{const{name:t,value:n}=e.target;x(e=>(0,r.A)((0,r.A)({},e),{},{[t]:n}))};return a?(0,c.jsx)("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-gray-900",children:(0,c.jsx)("h1",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:"Loading Post..."})}):u?(0,c.jsxs)("div",{className:"container mx-auto px-6 py-20 text-center",children:[(0,c.jsxs)("h1",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:["Error: ",u.message]}),(0,c.jsx)(s.N_,{to:"/blog",className:"mt-4 inline-block text-blue-600 dark:text-blue-400 hover:underline",children:"\u2190 Back to Blog"})]}):e?(0,c.jsxs)(M.P.div,{className:"bg-white dark:bg-gray-900",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,c.jsxs)(i.mg,{children:[(0,c.jsx)("title",{children:"Nexus Solutions | ".concat(e.title)}),(0,c.jsx)("meta",{name:"description",content:"Read the blog post: ".concat(e.title)})]}),(0,c.jsxs)("div",{className:"relative h-96",children:[(0,c.jsx)("img",{src:(0,q.d)(e.mainImage).width(1200).height(400).auto("format").fit("crop").url(),alt:e.title,className:"absolute inset-0 w-full h-full object-cover"}),(0,c.jsx)("div",{className:"absolute inset-0 bg-black/50"}),(0,c.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-end p-8 md:p-12",children:[(0,c.jsx)("h1",{className:"text-4xl md:text-6xl font-extrabold text-white z-10",children:e.title}),(0,c.jsxs)("p",{className:"text-lg text-gray-200 z-10 mt-2",children:["Published on ",O(e.publishedAt)]})]})]}),(0,c.jsx)("div",{className:"container mx-auto max-w-3xl px-6 py-12 md:py-20",children:(0,c.jsx)("article",{className:"prose prose-lg dark:prose-invert\r prose-headings:font-bold prose-headings:text-gray-900 dark:prose-headings:text-white\r prose-a:text-blue-600 dark:prose-a:text-blue-400\r prose-li:marker:text-blue-600 dark:prose-li:marker:text-blue-400\r prose-blockquote:border-l-blue-600 dark:prose-blockquote:border-l-blue-400",children:(0,c.jsx)(D,{value:e.body})})}),(0,c.jsx)("section",{className:"bg-gray-50 dark:bg-gray-800 py-12 md:py-20",children:(0,c.jsxs)("div",{className:"container mx-auto max-w-3xl px-6",children:[(0,c.jsxs)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:["Comments (",n?n.length:0,")"]}),(0,c.jsxs)("div",{className:"space-y-6",children:[n&&n.length>0?n.map(e=>(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-lg shadow",children:[(0,c.jsxs)("div",{className:"flex items-center mb-2",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.name}),(0,c.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-3",children:O(e._createdAt)})]}),(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:e.comment})]},e._id)):(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"No comments yet. Be the first to leave one!"}),(0,c.jsxs)("div",{className:"pt-8",children:[(0,c.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Leave a Comment"}),p?(0,c.jsx)("div",{className:"bg-green-50 dark:bg-green-900 border border-green-300 dark:border-green-700 text-green-800 dark:text-green-200 p-4 rounded-lg",children:"Thank you for your comment! It is awaiting moderation."}):(0,c.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!h.name||!h.comment)return;k(!0);const n={name:h.name,comment:h.comment,post:e._id};try{if(!(await fetch("http://localhost:3001/api/submit-comment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Failed to submit comment");k(!1),y(!0),x({name:"",comment:""})}catch(r){console.error("Error submitting comment:",r),k(!1)}},className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),(0,c.jsx)("input",{type:"text",name:"name",id:"name",value:h.name,onChange:b,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm \r focus:border-blue-500 focus:ring-blue-500\r dark:bg-gray-900 dark:border-gray-600 dark:text-white",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Comment"}),(0,c.jsx)("textarea",{name:"comment",id:"comment",rows:"4",value:h.comment,onChange:b,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm \r focus:border-blue-500 focus:ring-blue-500\r dark:bg-gray-900 dark:border-gray-600 dark:text-white",required:!0})]}),(0,c.jsx)("div",{children:(0,c.jsx)("button",{type:"submit",disabled:f,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm\r text-base font-medium rounded-lg text-white bg-blue-600\r hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\r transition duration-300\r disabled:bg-gray-400 dark:disabled:bg-gray-600",children:f?"Submitting...":"Submit Comment"})})]})]})]})]})})]}):null}},5621:(e,t,n)=>{n.d(t,{S:()=>i,d:()=>c});var r=n(6358),l=n(138),s=n.n(l);const i=(0,r.UU)({projectId:"m4s7pq0x",dataset:"production",useCdn:!0,apiVersion:"2023-05-03"}),o=s()(i),c=e=>o.image(e)}}]);
//# sourceMappingURL=485.469b95dd.chunk.js.map